"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[22],{5779:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return s},default:function(){return c},frontMatter:function(){return p},metadata:function(){return l},toc:function(){return d}});var i=n(5773),r=n(808),o=(n(7378),n(5318)),a=(n(517),n(7637),["components"]),p={id:"code-generation",title:"\ucf54\ub4dc \uc0dd\uc131",sidebar_label:"\ucf54\ub4dc \uc0dd\uc131",hide_title:!0,description:"RTK Query > \uc0ac\uc6a9\ubc95 > Code Generation: automated creation of API code"},s=void 0,l={unversionedId:"rtk-query/usage/code-generation",id:"rtk-query/usage/code-generation",isDocsHomePage:!1,title:"\ucf54\ub4dc \uc0dd\uc131",description:"RTK Query > \uc0ac\uc6a9\ubc95 > Code Generation: automated creation of API code",source:"@site/../docs/rtk-query/usage/code-generation.mdx",sourceDirName:"rtk-query/usage",slug:"/rtk-query/usage/code-generation",permalink:"/redux-toolkit/rtk-query/usage/code-generation",tags:[],version:"current",lastUpdatedAt:1656211135,formattedLastUpdatedAt:"6/26/2022",frontMatter:{id:"code-generation",title:"\ucf54\ub4dc \uc0dd\uc131",sidebar_label:"\ucf54\ub4dc \uc0dd\uc131",hide_title:!0,description:"RTK Query > \uc0ac\uc6a9\ubc95 > Code Generation: automated creation of API code"},sidebar:"docs",previous:{title:"\ucf54\ub4dc \ubd84\ud560",permalink:"/redux-toolkit/rtk-query/usage/code-splitting"},next:{title:"Server Side Rendering",permalink:"/redux-toolkit/rtk-query/usage/server-side-rendering"}},d=[{value:"GraphQL",id:"graphql",children:[],level:2},{value:"OpenAPI",id:"openapi",children:[{value:"Usage",id:"usage",children:[],level:3},{value:"Programmatic usage",id:"programmatic-usage",children:[],level:3},{value:"Config file options",id:"config-file-options",children:[{value:"Simple usage",id:"simple-usage",children:[],level:4},{value:"Filtering endpoints",id:"filtering-endpoints",children:[],level:4},{value:"Endpoint overrides",id:"endpoint-overrides",children:[],level:4},{value:"Multiple output files",id:"multiple-output-files",children:[],level:4}],level:3}],level:2}],u={toc:d};function c(e){var t=e.components,n=(0,r.Z)(e,a);return(0,o.kt)("wrapper",(0,i.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"\ucf54\ub4dc-\uc0dd\uc131"},"\ucf54\ub4dc \uc0dd\uc131"),(0,o.kt)("p",null,"RTK Query's API and architecture is oriented around declaring API endpoints up front. This lends itself well to automatically generating API slice definitions from external API schema definitions, such as OpenAPI and GraphQL."),(0,o.kt)("p",null,"We have early previews of code generation capabilities available as separate tools."),(0,o.kt)("h2",{id:"graphql"},"GraphQL"),(0,o.kt)("p",null,"\uc6b0\ub9ac\ub294 ",(0,o.kt)("a",{parentName:"p",href:"https://www.graphql-code-generator.com/docs/plugins/typescript-rtk-query"},"Plugin for GraphQL Codegen")," \uc744 \uc81c\uacf5\ud558\uba70, graphql-codegen \ud648\ud398\uc774\uc9c0\uc5d0\uc11c \uc774\uc5d0 \ub300\ud55c \ubb38\uc11c\ub97c \ucc3e\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,o.kt)("p",null,"\uc0ac\uc6a9 \ubc29\ubc95\uc5d0 \ub300\ud55c \uc804\uccb4 \uc608\uc81c\ub294 ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/reduxjs/redux-toolkit/tree/master/examples/query/react/graphql-codegen"},"this example project")," \uc5d0\uc11c \ucc3e\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,o.kt)("h2",{id:"openapi"},"OpenAPI"),(0,o.kt)("p",null,"\uc6b0\ub9ac\ub294 OpenAPI \uc2a4\ud0a4\ub9c8\uc5d0\uc11c RTK Query code\ub97c \uc0dd\uc131\ud558\ub294 \ud328\ud0a4\uc9c0\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4. \uadf8\uac83\uc740 ",(0,o.kt)("inlineCode",{parentName:"p"},"@rtk-query/codegen-openapi")," \uac8c\uc2dc\ub418\uc5b4 \uc788\uc73c\uba70 ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/reduxjs/redux-toolkit/tree/master/packages/rtk-query-codegen-openapi"},(0,o.kt)("inlineCode",{parentName:"a"},"packages/rtk-query-codegen-openapi"))," \uc5d0\uc11c \uc18c\uc2a4\ucf54\ub4dc\ub97c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,o.kt)("h3",{id:"usage"},"Usage"),(0,o.kt)("p",null,"\ub2e4\uc74c\uacfc \uac19\uc774 ",(0,o.kt)("inlineCode",{parentName:"p"},"createApi"),"\ub97c \uc0ac\uc6a9\ud558\uc5ec \ube48 api\ub97c \ub9cc\ub4ed\ub2c8\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'no-transpile title="src/store/emptyApi.ts"',"no-transpile":!0,title:'"src/store/emptyApi.ts"'},"// Or from '@reduxjs/toolkit/query' if not using the auto-generated hooks\nimport { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react'\n\n// initialize an empty api service that we'll inject endpoints into later as needed\nexport const emptySplitApi = createApi({\n  baseQuery: fetchBaseQuery({ baseUrl: '/' }),\n  endpoints: () => ({}),\n})\n")),(0,o.kt)("p",null,"\ub2e4\uc74c\uacfc \uac19\uc740 \ub0b4\uc6a9\uc73c\ub85c \uad6c\uc131 \ud30c\uc77c(json, js \ub610\ub294 ts)\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'no-transpile title="openapi-config.ts"',"no-transpile":!0,title:'"openapi-config.ts"'},"import type { ConfigFile } from '@rtk-query/codegen-openapi'\n\nconst config: ConfigFile = {\n  schemaFile: 'https://petstore3.swagger.io/api/v3/openapi.json',\n  apiFile: './src/store/emptyApi.ts',\n  apiImport: 'emptySplitApi',\n  outputFile: './src/store/petApi.ts',\n  exportName: 'petApi',\n  hooks: true,\n}\n\nexport default config\n")),(0,o.kt)("p",null,"\uadf8 \ub4a4, \ucf54\ub4dc \uc0dd\uc131\uae30\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npx @rtk-query/codegen-openapi openapi-config.ts\n")),(0,o.kt)("h3",{id:"programmatic-usage"},"Programmatic usage"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'no-transpile title="src/store/petApi.ts"',"no-transpile":!0,title:'"src/store/petApi.ts"'},"import { generateEndpoints } from '@rtk-query/codegen-openapi'\n\nconst api = await generateEndpoints({\n  apiFile: './fixtures/emptyApi.ts',\n  schemaFile: resolve(__dirname, 'fixtures/petstore.json'),\n  filterEndpoints: ['getPetById', 'addPet'],\n  hooks: true,\n})\n")),(0,o.kt)("h3",{id:"config-file-options"},"Config file options"),(0,o.kt)("h4",{id:"simple-usage"},"Simple usage"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:"no-transpile","no-transpile":!0},"interface SimpleUsage {\n  apiFile: string\n  schemaFile: string\n  apiImport?: string\n  exportName?: string\n  argSuffix?: string\n  responseSuffix?: string\n  hooks?: boolean\n  outputFile: string\n  filterEndpoints?:\n    | string\n    | RegExp\n    | EndpointMatcherFunction\n    | Array<string | RegExp | EndpointMatcherFunction>\n  endpointOverrides?: EndpointOverrides[]\n}\n\nexport type EndpointMatcherFunction = (\n  operationName: string,\n  operationDefinition: OperationDefinition\n) => boolean\n")),(0,o.kt)("h4",{id:"filtering-endpoints"},"Filtering endpoints"),(0,o.kt)("p",null,"\uba87 \uac1c\uc758 endpoint\ub9cc \ud3ec\ud568\ud558\ub824\ub294 \uacbd\uc6b0 ",(0,o.kt)("inlineCode",{parentName:"p"},"filterEndpoints")," \uad6c\uc131 \uc635\uc158\uc744 \uc0ac\uc6a9\ud558\uc5ec endpoint\ub97c \ud544\ud130\ub9c1\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'no-transpile title="openapi-config.ts"',"no-transpile":!0,title:'"openapi-config.ts"'},"const filteredConfig: ConfigFile = {\n  // ...\n  // should only have endpoints loginUser, placeOrder, getOrderById, deleteOrder\n  filterEndpoints: ['loginUser', /Order/],\n}\n")),(0,o.kt)("h4",{id:"endpoint-overrides"},"Endpoint overrides"),(0,o.kt)("p",null,"endpoint\uac00 query \ub300\uc2e0 mutation\uc73c\ub85c \uc0dd\uc131\ub418\uac70\ub098 \ub2e4\ub978 \ubc29\uc2dd\uc73c\ub85c \uc0dd\uc131\ub418\uc5b4\uc57c \ud558\ub294 \uacbd\uc6b0, \ub2e4\uc74c\uacfc \uac19\uc774 \uc7ac\uc815\uc758\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'no-transpile title="openapi-config.ts"',"no-transpile":!0,title:'"openapi-config.ts"'},"const withOverride: ConfigFile = {\n  // ...\n  endpointOverrides: [\n    {\n      pattern: 'loginUser',\n      type: 'mutation',\n    },\n  ],\n}\n")),(0,o.kt)("h4",{id:"multiple-output-files"},"Multiple output files"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'no-transpile title="openapi-config.ts"',"no-transpile":!0,title:'"openapi-config.ts"'},"const config: ConfigFile = {\n  schemaFile: 'https://petstore3.swagger.io/api/v3/openapi.json',\n  apiFile: './src/store/emptyApi.ts',\n  outputFiles: {\n    './src/store/user.ts': {\n      filterEndpoints: [/user/i],\n    },\n    './src/store/order.ts': {\n      filterEndpoints: [/order/i],\n    },\n    './src/store/pet.ts': {\n      filterEndpoints: [/pet/i],\n    },\n  },\n}\n")))}c.isMDXComponent=!0}}]);