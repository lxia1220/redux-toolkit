"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2577],{5365:function(e,t,r){r.r(t),r.d(t,{contentTitle:function(){return u},default:function(){return g},frontMatter:function(){return d},metadata:function(){return c},toc:function(){return m}});var a=r(5773),n=r(808),i=(r(7378),r(5318)),o=r(517),s=r(7637),l=["components"],d={id:"error-handling",title:"Error Handling",sidebar_label:"Error Handling",hide_title:!0,description:"RTK Query > \uc0ac\uc6a9\ubc95 > Error Handling: dealing with API errors"},u=void 0,c={unversionedId:"rtk-query/usage/error-handling",id:"rtk-query/usage/error-handling",isDocsHomePage:!1,title:"Error Handling",description:"RTK Query > \uc0ac\uc6a9\ubc95 > Error Handling: dealing with API errors",source:"@site/../docs/rtk-query/usage/error-handling.mdx",sourceDirName:"rtk-query/usage",slug:"/rtk-query/usage/error-handling",permalink:"/redux-toolkit/rtk-query/usage/error-handling",tags:[],version:"current",lastUpdatedAt:1656242924,formattedLastUpdatedAt:"6/26/2022",frontMatter:{id:"error-handling",title:"Error Handling",sidebar_label:"Error Handling",hide_title:!0,description:"RTK Query > \uc0ac\uc6a9\ubc95 > Error Handling: dealing with API errors"},sidebar:"docs",previous:{title:"Conditional Fetching",permalink:"/redux-toolkit/rtk-query/usage/conditional-fetching"},next:{title:"Pagination",permalink:"/redux-toolkit/rtk-query/usage/pagination"}},m=[{value:"Overview",id:"overview",children:[{value:"Error Display Examples",id:"error-display-examples",children:[],level:3}],level:2},{value:"Errors with a custom <code>baseQuery</code>",id:"errors-with-a-custom-basequery",children:[],level:2},{value:"Handling errors at a macro level",id:"handling-errors-at-a-macro-level",children:[],level:2}],p={toc:m};function g(e){var t=e.components,r=(0,n.Z)(e,l);return(0,i.kt)("wrapper",(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"error-handling"},"Error Handling"),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"../api/fetchBaseQuery"},"fetchBaseQuery"),"\ub97c \uc0ac\uc6a9\ud560 \ub54c query\ub098 mutation\uc5d0\uc11c \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uba74 \ud574\ub2f9 hook\uc758 error \uc18d\uc131\uc5d0 \ubc18\ud658\ub429\ub2c8\ub2e4. \uc774 \uacbd\uc6b0 \uad6c\uc131 \uc694\uc18c\uac00 \ub2e4\uc2dc \ub80c\ub354\ub9c1\ub418\uba70 \uc6d0\ud558\ub294 \uacbd\uc6b0 \uc624\ub958 \ub370\uc774\ud130\ub97c \uae30\ubc18\uc73c\ub85c \uc801\uc808\ud55c UI\ub97c \ud45c\uc2dc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,i.kt)("h3",{id:"error-display-examples"},"Error Display Examples"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="Query Error"',title:'"Query','Error"':!0},"function PostsList() {\n  const { data, error } = useGetPostsQuery()\n\n  return (\n    <div>\n      {error.status} {JSON.stringify(error.data)}\n    </div>\n  )\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="Mutation Error"',title:'"Mutation','Error"':!0},"function AddPost() {\n  const [addPost, { error }] = useAddPostMutation()\n\n  return (\n    <div>\n      {error.status} {JSON.stringify(error.data)}\n    </div>\n  )\n}\n")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Mutation \uc9c1\ud6c4 error\ub098 success payload\uc5d0 \uc811\uadfc\ud574\uc57c \ud558\ub294 \uacbd\uc6b0, ",(0,i.kt)("inlineCode",{parentName:"p"},".unwrap()"),"\uc744 \uc5f0\uacb0 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="Using .unwrap" no-transpile',title:'"Using','.unwrap"':!0,"no-transpile":!0},"addPost({ id: 1, name: 'Example' })\n  .unwrap()\n  .then((payload) => console.log('fulfilled', payload))\n  .catch((error) => console.error('rejected', error))\n")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="Manually selecting an error"',title:'"Manually',selecting:!0,an:!0,'error"':!0},"function PostsList() {\n  const { error } = useSelector(api.endpoints.getPosts.select())\n\n  return (\n    <div>\n      {error.status} {JSON.stringify(error.data)}\n    </div>\n  )\n}\n")),(0,i.kt)("h2",{id:"errors-with-a-custom-basequery"},"Errors with a custom ",(0,i.kt)("inlineCode",{parentName:"h2"},"baseQuery")),(0,i.kt)("p",null,"\uc751\ub2f5\uc774 'data' \ub610\ub294 'error'\ub85c \ubc18\ud658\ub418\ub294\uc9c0\uc758 \uc5ec\ubd80\ub294 \uc81c\uacf5\ub41c 'baseQuery'\uc5d0 \uc758\ud574 \uacb0\uc815\ub429\ub2c8\ub2e4."),(0,i.kt)("p",null,"\uad81\uadf9\uc801\uc73c\ub85c \uc6d0\ud558\ub294 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \ud1b5\ud574 ",(0,i.kt)("inlineCode",{parentName:"p"},"baseQuery"),"\ub97c \uad6c\uc131\ud560 \uc218 \uc788\uc9c0\ub9cc, \uc62c\ubc14\ub978 \uc751\ub2f5 \ud615\uc2dd\uc744 \ubc18\ud658\ud558\ub294 \uac83\uc774 \uc911\uc694\ud569\ub2c8\ub2e4. \ub9cc\uc57d \uc544\uc9c1 ",(0,i.kt)("a",{parentName:"p",href:"../api/fetchBaseQuery"},(0,i.kt)("inlineCode",{parentName:"a"},"fetchBaseQuery"))," \ub97c \uc0ac\uc6a9\ud574\ubcf4\uc9c0 \uc54a\uc558\ub2e4\uba74, \ud55c\ubc88 \uc2dc\ub3c4 \ud574 \ubcf4\uc138\uc694! Otherwise, see ",(0,i.kt)("a",{parentName:"p",href:"./customizing-queries"},"Customizing Queries")," for information on how to alter the returned errors."),(0,i.kt)("h2",{id:"handling-errors-at-a-macro-level"},"Handling errors at a macro level"),(0,i.kt)("p",null,"\uc624\ub958\ub97c \ucc98\ub9ac\ud560 \uc218 \uc788\ub294 \uba87 \uac00\uc9c0 \ubc29\ubc95\uc774 \uc788\uc73c\uba70, \uc5b4\ub5a4 \uacbd\uc6b0\uc5d0\ub294 \ube44\ub3d9\uae30 \uc624\ub958\uc5d0 \ub300\ud55c toast notification\uc744 \ud45c\uc2dc\ud558\ub294 \uac83\uc744 \uc6d0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. RTK Query\ub294 Redux \ubc0f Redux-Toolkit\uc744 \uae30\ubc18\uc73c\ub85c \ud558\uae30 \ub54c\ubb38\uc5d0 \uac04\ub2e8\ud558\uac8c store\uc5d0 \ubbf8\ub4e4\uc6e8\uc5b4\ub97c \ucd94\uac00\ud558\uc5ec \uc774\ub97c \ucc98\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Redux Toolkit\uc5d0\ub294 additional custom behaviors\uc5d0 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 ",(0,i.kt)("a",{parentName:"p",href:"/redux-toolkit/api/matching-utilities#matching-utilities"},"action matching utilities")," \uac00 \uc788\uc2b5\ub2c8\ub2e4."))),(0,i.kt)(s.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"ts",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="Error catching middleware example"',title:'"Error',catching:!0,middleware:!0,'example"':!0},"import { isRejectedWithValue } from '@reduxjs/toolkit'\nimport type { MiddlewareAPI, Middleware } from '@reduxjs/toolkit'\nimport { toast } from 'your-cool-library'\n\n/**\n * Log a warning and show a toast!\n */\nexport const rtkQueryErrorLogger: Middleware =\n  (api: MiddlewareAPI) => (next) => (action) => {\n    // RTK Query uses `createAsyncThunk` from redux-toolkit under the hood, so we're able to utilize these matchers!\n    if (isRejectedWithValue(action)) {\n      console.warn('We got a rejected action!')\n      toast.warn({ title: 'Async error!', message: action.error.data.message })\n    }\n\n    return next(action)\n  }\n"))),(0,i.kt)(o.Z,{value:"js",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Error catching middleware example"',title:'"Error',catching:!0,middleware:!0,'example"':!0},"import { isRejectedWithValue } from '@reduxjs/toolkit'\nimport { toast } from 'your-cool-library'\n\n/**\n * Log a warning and show a toast!\n */\nexport const rtkQueryErrorLogger = (api) => (next) => (action) => {\n  // RTK Query uses `createAsyncThunk` from redux-toolkit under the hood, so we're able to utilize these matchers!\n  if (isRejectedWithValue(action)) {\n    console.warn('We got a rejected action!')\n    toast.warn({ title: 'Async error!', message: action.error.data.message })\n  }\n\n  return next(action)\n}\n")))))}g.isMDXComponent=!0}}]);