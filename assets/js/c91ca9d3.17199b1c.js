"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1447],{3991:function(e,t,a){a.r(t),a.d(t,{contentTitle:function(){return s},default:function(){return u},frontMatter:function(){return o},metadata:function(){return l},toc:function(){return d}});var n=a(5773),r=a(808),i=(a(7378),a(5318)),A=["components"],o={id:"immer-reducers",title:"Writing Reducers with Immer",sidebar_label:"Writing Reducers with Immer",hide_title:!0},s=void 0,l={unversionedId:"usage/immer-reducers",id:"usage/immer-reducers",isDocsHomePage:!1,title:"Writing Reducers with Immer",description:"&nbsp;",source:"@site/../docs/usage/immer-reducers.md",sourceDirName:"usage",slug:"/usage/immer-reducers",permalink:"/redux-toolkit/usage/immer-reducers",tags:[],version:"current",lastUpdatedAt:1656217065,formattedLastUpdatedAt:"6/26/2022",frontMatter:{id:"immer-reducers",title:"Writing Reducers with Immer",sidebar_label:"Writing Reducers with Immer",hide_title:!0},sidebar:"docs",previous:{title:"Usage With TypeScript",permalink:"/redux-toolkit/usage/usage-with-typescript"},next:{title:"configureStore",permalink:"/redux-toolkit/api/configureStore"}},d=[{value:"\ubd88\ubcc0\uc131\uacfc Redux",id:"\ubd88\ubcc0\uc131\uacfc-redux",children:[{value:"\ubd88\ubcc0\uc131\uc758 \uae30\ucd08",id:"\ubd88\ubcc0\uc131\uc758-\uae30\ucd08",children:[],level:3},{value:"Reducers and Immutable Updates",id:"reducers-and-immutable-updates",children:[],level:3}],level:2},{value:"Immer\ub97c \ud1b5\ud55c Immutable Updates",id:"immer\ub97c-\ud1b5\ud55c-immutable-updates",children:[{value:"Redux Toolkit \uacfc Immer",id:"redux-toolkit-\uacfc-immer",children:[],level:3}],level:2},{value:"Immer Usage Patterns",id:"immer-usage-patterns",children:[{value:"Mutating and Returning State",id:"mutating-and-returning-state",children:[],level:3},{value:"Resetting and Replacing State",id:"resetting-and-replacing-state",children:[],level:3},{value:"Debugging and Inspecting Drafted State",id:"debugging-and-inspecting-drafted-state",children:[],level:3},{value:"\uc911\ucca9 \ub370\uc774\ud130 \uc5c5\ub370\uc774\ud2b8",id:"\uc911\ucca9-\ub370\uc774\ud130-\uc5c5\ub370\uc774\ud2b8",children:[],level:3},{value:"Linting State Mutations",id:"linting-state-mutations",children:[],level:3}],level:2},{value:"Immer\uac00 \ub0b4\uc7a5\ub41c \uc774\uc720",id:"immer\uac00-\ub0b4\uc7a5\ub41c-\uc774\uc720",children:[{value:"Immer\uc758 \uc774\uc810",id:"immer\uc758-\uc774\uc810",children:[],level:3},{value:"Tradeoffs and Concerns",id:"tradeoffs-and-concerns",children:[],level:3},{value:"Architecture and Intent",id:"architecture-and-intent",children:[],level:3}],level:2},{value:"Further Information",id:"further-information",children:[],level:2}],m={toc:d};function u(e){var t=e.components,o=(0,r.Z)(e,A);return(0,i.kt)("wrapper",(0,n.Z)({},m,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"immer\ub97c-\ud1b5\ud574-reducer-\uc791\uc131\ud558\uae30"},"Immer\ub97c \ud1b5\ud574 Reducer \uc791\uc131\ud558\uae30"),(0,i.kt)("p",null,"Redux Toolkit\uc758 ",(0,i.kt)("a",{parentName:"p",href:"/redux-toolkit/api/createReducer"},(0,i.kt)("inlineCode",{parentName:"a"},"createReducer"))," \ubc0f ",(0,i.kt)("a",{parentName:"p",href:"/redux-toolkit/api/createSlice"},(0,i.kt)("inlineCode",{parentName:"a"},"createSlice"))," \ub294 \ub0b4\ubd80\uc801\uc73c\ub85c ",(0,i.kt)("a",{parentName:"p",href:"https://immerjs.github.io/immer/"},"Immer"),' \ub97c \uc790\ub3d9\uc73c\ub85c \uc0ac\uc6a9\ud558\uc5ec "mutating" \uad6c\ubb38\uc744 \ud1b5\ud55c \uc5c5\ub370\uc774\ud2b8 \ub85c\uc9c1\uc744 \uac04\ub2e8\ud558\uac8c \uc791\uc131\ud560 \uc218 \uc788\ub3c4\ub85d \ud569\ub2c8\ub2e4. \uc774\uac83\uc740 \ub300\ubd80\ubd84\uc758 reducer \uad6c\ud604\uc744 \ub2e8\uc21c\ud654\ud558\ub294 \ub370 \ub3c4\uc6c0\uc774 \ub429\ub2c8\ub2e4.'),(0,i.kt)("p",null,"Immer \uc790\uccb4\ub294 \ucd94\uc0c1\ud654 \uacc4\uce35\uc774\uae30 \ub54c\ubb38\uc5d0, Redux Toolkit\uc774 Immer\ub97c \uc0ac\uc6a9\ud558\ub294 \uc774\uc720\uc640 \uc62c\ubc14\ub974\uac8c \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95\uc744 \uc774\ud574\ud558\ub294 \uac83\uc774 \uc911\uc694\ud569\ub2c8\ub2e4."),(0,i.kt)("h2",{id:"\ubd88\ubcc0\uc131\uacfc-redux"},"\ubd88\ubcc0\uc131\uacfc Redux"),(0,i.kt)("h3",{id:"\ubd88\ubcc0\uc131\uc758-\uae30\ucd08"},"\ubd88\ubcc0\uc131\uc758 \uae30\ucd08"),(0,i.kt)("p",null,'"Mutable" \uc740 "\ubcc0\uacbd\uac00\ub2a5\ud55c" \uac83\uc744 \uc758\ubbf8\ud569\ub2c8\ub2e4. \ub9cc\uc57d \ubb34\uc5b8\uac00\uac00 "immutable" \ud558\ub2e4\uba74, \uadf8\uac83\uc740 \ubcc0\uacbd\ub420 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.'),(0,i.kt)("p",null,"JavaScript\uc758 objects\uc640 arrays\ub294 \uae30\ubcf8\uc801\uc73c\ub85c \ubaa8\ub450 Mutable \ud569\ub2c8\ub2e4. \ub9cc\uc57d \ub0b4\uac00 object\ub97c \ub9cc\ub4e0\ub2e4\uba74, \ub098\ub294 \uadf8\uac83\uc758 fields\uc758 \ub0b4\uc6a9\uc744 \uc218\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub9cc\uc57d \ub0b4\uac00 \ubc30\uc5f4\uc744 \ub9cc\ub4e0\ub2e4\uba74, \uadf8\uac83\uc758 \ub0b4\uc6a9\ub610\ud55c \uc218\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const obj = { a: 1, b: 2 }\n// \uc678\ubd80\uc5d0\uc11c \ubcf4\uae30\uc5d4 \uc5ec\uc804\ud788 \ub3d9\uc77c\ud55c object\uc774\ub098, \ub0b4\uc6a9\uc740 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\nobj.b = 3\n\nconst arr = ['a', 'b']\n// \ub9c8\ucc2c\uac00\uc9c0\ub85c, \uc6b0\ub9ac\ub294 \ubc30\uc5f4\uc758 \ub0b4\uc6a9\uc744 \uc218\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\narr.push('c')\narr[1] = 'd'\n")),(0,i.kt)("p",null,"\uc774\uac83\uc744 object \ub610\ub294 array ",(0,i.kt)("em",{parentName:"p"},"mutating")," \uc774\ub77c \ud569\ub2c8\ub2e4. \uba54\ubaa8\ub9ac\uc5d0\uc11c object\ub098 array\uc758 reference\ub294 \ub3d9\uc77c\ud558\ub098, \ub0b4\ubd80\uc758 \ub0b4\uc6a9\uc774 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\ubd88\ubcc0\uc131\uc744 \uc720\uc9c0\ud558\uba74\uc11c \uac12\uc744 \uc218\uc815\ud558\uae30 \uc704\ud574\uc11c\ub294 \uae30\uc874\uc758 object/arrays\uc758 ",(0,i.kt)("em",{parentName:"strong"},"\ubcf5\uc0ac\ubcf8")," \uc744 \ub9cc\ub4e0 \ub4a4, \ud574\ub2f9 \uac12\uc744 \uc218\uc815\ud574\uc57c\ud569\ub2c8\ub2e4.")),(0,i.kt)("p",null,"We can do this by hand using JavaScript's array / object spread operators, as well as array methods that return new copies of the array instead of mutating the original array:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const obj = {\n  a: {\n    // To safely update obj.a.c, we have to copy each piece\n    c: 3,\n  },\n  b: 2,\n}\n\nconst obj2 = {\n  // copy obj\n  ...obj,\n  // overwrite a\n  a: {\n    // copy obj.a\n    ...obj.a,\n    // overwrite c\n    c: 42,\n  },\n}\n\nconst arr = ['a', 'b']\n// Create a new copy of arr, with \"c\" appended to the end\nconst arr2 = arr.concat('c')\n\n// or, we can make a copy of the original array:\nconst arr3 = arr.slice()\n// and mutate the copy:\narr3.push('c')\n")),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"\ub354 \uc54c\uace0\uc2f6\ub098\uc694?")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"JavaScript\uc5d0\uc11c\uc758 \ubd88\ubcc0\uc131\uc5d0 \ub354 \uc54c\uace0 \uc2f6\ub2e4\uba74, \ub2e4\uc74c\uc744 \ucc38\uace0\ud558\uc138\uc694:"),(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://daveceddia.com/javascript-references/"},"A Visual Guide to References in JavaScript")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://daveceddia.com/react-redux-immutability-guide/"},"Immutability in React and Redux: The Complete Guide"))))),(0,i.kt)("h3",{id:"reducers-and-immutable-updates"},"Reducers and Immutable Updates"),(0,i.kt)("p",null,"Redux\uc758 \uc911\uc694\ud55c \uaddc\uce59 \uc911 \ud558\ub098\ub294 ",(0,i.kt)("strong",{parentName:"p"},"\uc6b0\ub9ac\uc758 reducers\ub294 ",(0,i.kt)("em",{parentName:"strong"},"\uc808\ub300\ub85c")," original / current state values\ub97c \uc218\uc815\ud574\uc120 \uc548\ub429\ub2c8\ub2e4!")),(0,i.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-js"},"// \u274c Illegal - by default, this will mutate the state!\nstate.value = 123\n")))),(0,i.kt)("p",null,"Redux\uc5d0\uc11c state\ub97c \uc218\uc815\ud574\uc120 \uc548\ub418\ub294 \uba87\uac00\uc9c0 \uc774\uc720\uac00 \uc788\uc2b5\ub2c8\ub2e4:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"UI\uac00 \ucd5c\uc2e0 \uac12\uc744 \ubc18\uc601\ud558\uc9c0 \uc54a\ub294 \uac83\uacfc \uac19\uc740 \ubc84\uadf8\ub97c \uc720\ubc1c\ud569\ub2c8\ub2e4"),(0,i.kt)("li",{parentName:"ul"},"state\uac00 \uc5b8\uc81c \uc5b4\ub5bb\uac8c \uc5c5\ub370\uc774\ud2b8 \ub418\uc5c8\ub294\uc9c0 \uc774\ud574\ud558\uae30\ub97c \uc5b4\ub835\uac8c \ub9cc\ub4ed\ub2c8\ub2e4"),(0,i.kt)("li",{parentName:"ul"},"\ud14c\uc2a4\ud2b8\ub97c \uc791\uc131\ud558\uae30 \ub354\uc6b1 \uc5b4\ub835\uac8c \ub9cc\ub4ed\ub2c8\ub2e4"),(0,i.kt)("li",{parentName:"ul"},'It breaks the ability to use "time-travel debugging" correctly'),(0,i.kt)("li",{parentName:"ul"},"It goes against the intended spirit and usage patterns for Redux")),(0,i.kt)("p",null,"\uc6d0\ubcf8\uc744 \uc218\uc815\ud560 \uc218 \uc5c6\ub2e4\uba74, \uc5b4\ub5bb\uac8c \ubcc0\uacbd\ub41c \uc0c1\ud0dc\ub97c \ubc18\ud658\ud560 \uc218 \uc788\ub098\uc694?"),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("strong",{parentName:"p"},"Reducers \ub294 \uc6d0\ubcf8\uac12\uc758 ",(0,i.kt)("em",{parentName:"strong"},"\ubcf5\uc0ac\ubcf8")," \ub9cc \ub9cc\ub4e4 \uc218 \uc788\uc73c\uba70, \ubcf5\uc0ac\ubcf8\uc744 \uc218\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-js"},"// \u2705 This is safe, because we made a copy\nreturn {\n  ...state,\n  value: 123,\n}\n")))),(0,i.kt)("p",null,"JavaScript\uc758 \ubc30\uc5f4/\uac1d\uccb4 \ud655\uc0b0 \uc5f0\uc0b0\uc790\uc640 \uc6d0\ub798 \uac12\uc758 \ubcf5\uc0ac\ubcf8\uc744 \ubc18\ud658\ud558\ub294 \uae30\ud0c0 \ud568\uc218\ub97c \uc0ac\uc6a9\ud558\uc5ec Immutable Updates\ub97c \uc9c1\uc811 \uc791\uc131\ud560 \uc218 \uc788\uc74c\uc744 \uc774\ubbf8 \ubcf4\uc558\uc2b5\ub2c8\ub2e4."),(0,i.kt)("p",null,"\uc774\uac83\uc740 \ub370\uc774\ud130\uac00 \uc911\ucca9\ub418\uc5b4 \uc788\uc744 \uacbd\uc6b0 \ub354\uc6b1 \uc5b4\ub824\uc6cc\uc9c0\uba70, ",(0,i.kt)("strong",{parentName:"p"},"Immutable Updates\uc758 \uc911\uc694\ud55c \uaddc\uce59\uc740 \uc5c5\ub370\uc774\ud2b8\ud574\uc57c \ud558\ub294 \uc911\ucca9\uc758 ",(0,i.kt)("em",{parentName:"strong"},"\ubaa8\ub4e0")," \uc218\uc900\uc758 \ubcf5\uc0ac\ubcf8\uc744 \ub9cc\ub4e4\uc5b4\uc57c \ud55c\ub2e4\ub294 \uac83\uc785\ub2c8\ub2e4.")),(0,i.kt)("p",null,"\uc774\uac83\uc758 \uc608\uc2dc\ub97c \ubcf4\uc5ec\uc8fc\uc790\uba74:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"function handwrittenReducer(state, action) {\n  return {\n    ...state,\n    first: {\n      ...state.first,\n      second: {\n        ...state.first.second,\n        [action.someId]: {\n          ...state.first.second[action.someId],\n          fourth: action.someValue,\n        },\n      },\n    },\n  }\n}\n")),(0,i.kt)("p",null,"However, if you're thinking that \"writing immutable updates by hand this way looks hard to remember and do correctly\"... yeah, you're right! :)"),(0,i.kt)("p",null,"\uc9c1\uc811 immutable update\ub97c \uc791\uc131\ud558\ub294 \uac83\uc740 \uc5b4\ub824\uc6b4 \uc77c\uc774\uba70, ",(0,i.kt)("strong",{parentName:"p"},"reducers\uc5d0\uc11c \uc2e4\uc218\ub85c \uc0c1\ud0dc\ub97c \ubcc0\uacbd\ud558\ub294 \uac83\uc740 Redux \uc0ac\uc6a9\uc790\uac00 \uc800\uc9c0\ub974\ub294 \uac00\uc7a5 \uc77c\ubc18\uc801\uc778 \uc2e4\uc218\uc785\ub2c8\ub2e4"),"."),(0,i.kt)("h2",{id:"immer\ub97c-\ud1b5\ud55c-immutable-updates"},"Immer\ub97c \ud1b5\ud55c Immutable Updates"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://immerjs.github.io/immer/"},"Immer")," \ub294 immutable update logic\uc744 \ub2e8\uc21c\ud654 \uc2dc\ucf1c\uc8fc\ub294 \ub77c\uc774\ube0c\ub7ec\ub9ac \uc785\ub2c8\ub2e4."),(0,i.kt)("p",null,"Immer\ub294 \ub450\uac00\uc9c0 \uc778\uc218\uc778 \uc6d0\ubcf8\uc758 ",(0,i.kt)("inlineCode",{parentName:"p"},"state"),"\uc640 \ucf5c\ubc31 \ud568\uc218\ub97c \ud5c8\uc6a9\ud558\ub294 ",(0,i.kt)("inlineCode",{parentName:"p"},"produce"),' \ud568\uc218\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4. \ucf5c\ubc31 \ud568\uc218\uc5d0\ub294 \ud574\ub2f9 \uc0c1\ud0dc\uc758 "\ucd08\uc548" \ubc84\uc804\uc774 \uc81c\uacf5\ub418\uba70, \ucf5c\ubc31 \ub0b4\ubd80\uc5d0\uc11c \ucd08\uc548 \uac12\uc744 \ubcc0\uacbd\ud558\ub294 \ucf54\ub4dc\ub97c \uc791\uc131\ud558\ub294 \uac83\uc774 \uc548\uc804\ud569\ub2c8\ub2e4. Immer\ub294 \ucd08\uc548 \uac12\uc744 \ubcc0\uacbd\ud558\ub824\ub294 \ubaa8\ub4e0 \uc2dc\ub3c4\ub97c \ucd94\uc801\ud55c \ub2e4\uc74c \ubcc0\uacbd\ud560 \uc218 \uc5c6\ub294 \ub4f1\uac00\ubb3c\uc744 \uc0ac\uc6a9\ud558\uc5ec \ud574\ub2f9 mutation\uc744 \uc2e4\ud589\ud558\uc5ec \uc548\uc804\ud558\uace0 \ubd88\ubcc0\uc801\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub41c \uacb0\uacfc\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4:'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import produce from 'immer'\n\nconst baseState = [\n  {\n    todo: 'Learn typescript',\n    done: true,\n  },\n  {\n    todo: 'Try immer',\n    done: false,\n  },\n]\n\nconst nextState = produce(baseState, (draftState) => {\n  // \"mutate\" the draft array\n  draftState.push({ todo: 'Tweet about it' })\n  // \"mutate\" the nested state\n  draftState[1].done = true\n})\n\nconsole.log(baseState === nextState)\n// false - the array was copied\nconsole.log(baseState[0] === nextState[0])\n// true - the first item was unchanged, so same reference\nconsole.log(baseState[1] === nextState[1])\n// false - the second item was copied and updated\n")),(0,i.kt)("h3",{id:"redux-toolkit-\uacfc-immer"},"Redux Toolkit \uacfc Immer"),(0,i.kt)("p",null,"Redux Toolkit\uc758 ",(0,i.kt)("a",{parentName:"p",href:"/redux-toolkit/api/createReducer"},(0,i.kt)("inlineCode",{parentName:"a"},"createReducer")," API")," \ub294 \ub0b4\ubd80\uc5d0\uc11c \uc790\ub3d9\uc801\uc73c\ub85c Immer\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4. \ub530\ub77c\uc11c ",(0,i.kt)("inlineCode",{parentName:"p"},"createReducer"),'\uc5d0 \uc804\ub2ec\ub418\ub294 \ubaa8\ub4e0 case reducer \ud568\uc218 \ub0b4\ubd80\uc5d0\uc11c \uc0c1\ud0dc\ub97c "\ubcc0\uacbd"\ud558\ub294 \uac83\uc740 \uc548\uc804\ud569\ub2c8\ub2e4.:'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const todosReducer = createReducer([], (builder) => {\n  builder.addCase('todos/todoAdded', (state, action) => {\n    // \"mutate\" the array by calling push()\n    state.push(action.payload)\n  })\n})\n")),(0,i.kt)("p",null,"\ub2e4\uc74c\uc73c\ub85c ",(0,i.kt)("inlineCode",{parentName:"p"},"createSlice")," \ub610\ud55c \ub0b4\ubd80\uc801\uc73c\ub85c ",(0,i.kt)("inlineCode",{parentName:"p"},"createReducer"),'\ub97c \uc0ac\uc6a9\ud558\ubbc0\ub85c \uc0c1\ud0dc\ub97c "\ubcc0\uacbd"\ud558\ub294 \uac83\uc740 \uc548\uc804\ud569\ub2c8\ub2e4.'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const todosSlice = createSlice({\n  name: 'todos',\n  initialState: [],\n  reducers: {\n    todoAdded(state, action) {\n      state.push(action.payload)\n    },\n  },\n})\n")),(0,i.kt)("p",null,"\uc774\ub294 case reducer \ud568\uc218\uac00 ",(0,i.kt)("inlineCode",{parentName:"p"},"createSlice/createReducer"),' \ud638\ucd9c\uc758 \uc678\ubd80\uc5d0\uc11c \uc815\uc758\ub41c \uacbd\uc6b0\uc5d0\ub3c4 \uc801\uc6a9\ub429\ub2c8\ub2e4. \uc608\ub97c \ub4e4\uc5b4, \uc0c1\ud0dc\ub97c "\ubcc0\uacbd"\ud558\uace0 \ud544\uc694\uc5d0 \ub530\ub77c \ud3ec\ud568\ud560 \uac83\uc73c\ub85c \uc608\uc0c1\ud558\ub294 \uc7ac\uc0ac\uc6a9 \uac00\ub2a5\ud55c \ucf00\uc774\uc2a4 case reducer\ub97c \uc120\uc5b8\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.:'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const addItemToArray = (state, action) => {\n  state.push(action.payload)\n}\n\nconst todosSlice = createSlice({\n  name: 'todos',\n  initialState: [],\n  reducers: {\n    todoAdded: addItemToArray,\n  },\n})\n")),(0,i.kt)("p",null,'\uc774\uac83\uc740 "\ubcc0\uacbd" \ub85c\uc9c1\uc774 \uc2e4\ud589\ub420 \ub54c \ub0b4\ubd80\uc801\uc73c\ub85c Immer\uc758 ',(0,i.kt)("inlineCode",{parentName:"p"},"produce")," \uba54\uc18c\ub4dc\uc5d0 \ub798\ud551\ub418\uae30 \ub54c\ubb38\uc5d0 \ub3d9\uc791\ud569\ub2c8\ub2e4."),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("strong",{parentName:"p"},'"\ubcc0\uacbd" \ub85c\uc9c1\uc740 Immer \ub0b4\ubd80\uc5d0\uc11c \ub798\ud551\ub420 \ub54c ',(0,i.kt)("em",{parentName:"strong"},"\ub9cc")," \uc62c\ubc14\ub974\uac8c \uc791\ub3d9\ud55c\ub2e4\ub294 \uac83\uc744 \uae30\uc5b5\ud558\uc138\uc694!")," \uadf8\ub807\uc9c0 \uc54a\uc73c\uba74 \ud574\ub2f9 \ucf54\ub4dc\uac00 \uc2e4\uc81c\ub85c \ub370\uc774\ud130\ub97c ",(0,i.kt)("em",{parentName:"p"},"\ubcc0\uacbd\ud560")," \uac83\uc785\ub2c8\ub2e4."))),(0,i.kt)("h2",{id:"immer-usage-patterns"},"Immer Usage Patterns"),(0,i.kt)("p",null,"Redux Toolkit\uc5d0\uc11c Immer\ub97c \uc0ac\uc6a9\ud560 \ub54c \uc54c\uc544\uc57c \ud560 \uba87 \uac00\uc9c0 \uc720\uc6a9\ud55c \ud328\ud134\uacfc \uc8fc\uc758\ud574\uc57c \ud560 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4."),(0,i.kt)("h3",{id:"mutating-and-returning-state"},"Mutating and Returning State"),(0,i.kt)("p",null,"Immer works by tracking attempts to mutate an existing drafted state value, either by assigning to nested fields or by calling functions that mutate the value. That means that ",(0,i.kt)("strong",{parentName:"p"},"the ",(0,i.kt)("inlineCode",{parentName:"strong"},"state")," must be a JS object or array in order for Immer to see the attempted changes"),". (You can still have a slice's state be a primitive like a string or a boolean, but since primitives can never be mutated anyway, all you can do is just return a new value.)"),(0,i.kt)("p",null,"In any given case reducer, ",(0,i.kt)("strong",{parentName:"p"},"Immer expects that you will either ",(0,i.kt)("em",{parentName:"strong"},"mutate")," the existing state, ",(0,i.kt)("em",{parentName:"strong"},"or")," construct a new state value yourself and return it, but ",(0,i.kt)("em",{parentName:"strong"},"not")," both in the same function!")," For example, both of these are valid reducers with Immer:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const todosSlice = createSlice({\n  name: 'todos',\n  initialState: [],\n  reducers: {\n    todoAdded(state, action) {\n      // \"Mutate\" the existing state, no return value needed\n      state.push(action.payload)\n    },\n    todoDeleted(state, action.payload) {\n      // Construct a new result array immutably and return it\n      return state.filter(todo => todo.id !== action.payload)\n    }\n  }\n})\n")),(0,i.kt)("p",null,"However, it ",(0,i.kt)("em",{parentName:"p"},"is"),' possible to use immutable updates to do part of the work and then save the results via a "mutation". An example of this might be filtering a nested array:'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const todosSlice = createSlice({\n  name: 'todos',\n  initialState: {todos: [], status: 'idle'}\n  reducers: {\n    todoDeleted(state, action.payload) {\n      // Construct a new array immutably\n      const newTodos = state.todos.filter(todo => todo.id !== action.payload)\n      // \"Mutate\" the existing state to save the new array\n      state.todos = newTodos\n    }\n  }\n})\n")),(0,i.kt)("p",null,"\uc8fc\uc758\ud560 \uac83\uc740 ",(0,i.kt)("strong",{parentName:"p"},"implicit return\uc774 \uc788\ub294 arrow function\uc5d0\uc11c state\ub97c \uc218\uc815\ud560 \uacbd\uc6b0 \ud574\ub2f9 \uaddc\uce59\uc774 \uae68\uc838 \uc624\ub958\uac00 \ubc1c\uc0dd\ud569\ub2c8\ub2e4!")," This is because statements and function calls may return a value, and Immer sees both the attempted mutation and ",(0,i.kt)("em",{parentName:"p"},"and")," the new returned value and doesn't know which to use as the result. Some potential solutions are using the ",(0,i.kt)("inlineCode",{parentName:"p"},"void")," keyword to skip having a return value, or using curly braces to give the arrow function a body and no return value:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const todosSlice = createSlice({\n  name: 'todos',\n  initialState: [],\n  reducers: {\n    // \u274c ERROR: mutates state, but also returns new array size!\n    brokenReducer: (state, action) => state.push(action.payload),\n    // \u2705 SAFE: the `void` keyword prevents a return value\n    fixedReducer1: (state, action) => void state.push(action.payload),\n    // \u2705 SAFE: curly braces make this a function body and no return\n    fixedReducer2: (state, action) => {\n      state.push(action.payload)\n    },\n  },\n})\n")),(0,i.kt)("p",null,"While writing nested immutable update logic is hard, there are times when it ",(0,i.kt)("em",{parentName:"p"},"is")," simpler to do an object spread operation to update multiple fields at once, vs assigning individual fields:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"function objectCaseReducer1(state, action) {\n  const { a, b, c, d } = action.payload\n  return {\n    ...state,\n    a,\n    b,\n    c,\n    d,\n  }\n}\n\nfunction objectCaseReducer2(state, action) {\n  const { a, b, c, d } = action.payload\n  // This works, but we keep having to repeat `state.x =`\n  state.a = a\n  state.b = b\n  state.c = c\n  state.d = d\n}\n")),(0,i.kt)("p",null,"As an alternative, you can use ",(0,i.kt)("inlineCode",{parentName:"p"},"Object.assign")," to mutate multiple fields at once, since ",(0,i.kt)("inlineCode",{parentName:"p"},"Object.assign")," always mutates the first object that it's given:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"function objectCaseReducer3(state, action) {\n  const { a, b, c, d } = action.payload\n  Object.assign(state, { a, b, c, d })\n}\n")),(0,i.kt)("h3",{id:"resetting-and-replacing-state"},"Resetting and Replacing State"),(0,i.kt)("p",null,"Sometimes you may want to replace the entire existing ",(0,i.kt)("inlineCode",{parentName:"p"},"state"),", either because you've loaded some new data, or you want to reset the state back to its initial value."),(0,i.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("strong",{parentName:"p"},"A common mistake is to try assigning ",(0,i.kt)("inlineCode",{parentName:"strong"},"state = someValue")," directly. This will not work!")," This only points the local ",(0,i.kt)("inlineCode",{parentName:"p"},"state")," variable to a different reference. That is neither mutating the existing ",(0,i.kt)("inlineCode",{parentName:"p"},"state")," object/array in memory, nor returning an entirely new value, so Immer does not make any actual changes."))),(0,i.kt)("p",null,"Instead, to replace the existing state, you should return the new value directly:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const initialState = []\nconst todosSlice = createSlice({\n  name: 'todos',\n  initialState,\n  reducers: {\n    brokenTodosLoadedReducer(state, action) {\n      // \u274c ERROR: does not actually mutate or return anything new!\n      state = action.payload\n    },\n    fixedTodosLoadedReducer(state, action) {\n      // \u2705 CORRECT: returns a new value to replace the old one\n      return action.payload\n    },\n    correctResetTodosReducer(state, action) {\n      // \u2705 CORRECT: returns a new value to replace the old one\n      return initialState\n    },\n  },\n})\n")),(0,i.kt)("h3",{id:"debugging-and-inspecting-drafted-state"},"Debugging and Inspecting Drafted State"),(0,i.kt)("p",null,"It's common to want to log in-progress state from a reducer to see what it looks like as it's being updated, like ",(0,i.kt)("inlineCode",{parentName:"p"},"console.log(state)"),". Unfortunately, browsers display logged Proxy instances in a format that is hard to read or understand:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Logged proxy draft",src:a(1157).Z})),(0,i.kt)("p",null,"To work around this, ",(0,i.kt)("a",{parentName:"p",href:"https://immerjs.github.io/immer/current"},"Immer includes a ",(0,i.kt)("inlineCode",{parentName:"a"},"current")," function that extracts a copy of the wrapped data"),", and RTK re-exports ",(0,i.kt)("inlineCode",{parentName:"p"},"current"),". You can use this in your reducers if you need to log or inspect the work-in-progress state:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import { current } from '@reduxjs/toolkit'\n\nconst todosSlice = createSlice({\n  name: 'todos',\n  initialState: todosAdapter.getInitialState(),\n  reducers: {\n    todoToggled(state, action) {\n      // \u274c ERROR: logs the Proxy-wrapped data\n      console.log(state)\n      // \u2705 CORRECT: logs a plain JS copy of the current data\n      console.log(current(state))\n    },\n  },\n})\n")),(0,i.kt)("p",null,"The correct output would look like this instead:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Logged current value",src:a(7586).Z})),(0,i.kt)("p",null,"Immer also provides ",(0,i.kt)("a",{parentName:"p",href:"https://immerjs.github.io/immer/original"},(0,i.kt)("inlineCode",{parentName:"a"},"original")," and ",(0,i.kt)("inlineCode",{parentName:"a"},"isDraft")," functions"),", which retrieves the original data without any updates applied and check to see if a given value is a Proxy-wrapped draft. As of RTK 1.5.1, both of those are re-exported from RTK as well."),(0,i.kt)("h3",{id:"\uc911\ucca9-\ub370\uc774\ud130-\uc5c5\ub370\uc774\ud2b8"},"\uc911\ucca9 \ub370\uc774\ud130 \uc5c5\ub370\uc774\ud2b8"),(0,i.kt)("p",null,"Immer\ub294 \uc911\ucca9 \ub370\uc774\ud130 \uc5c5\ub370\uc774\ud2b8\ub97c \ud06c\uac8c \ub2e8\uc21c\ud654\ud569\ub2c8\ub2e4. Nested objects and arrays are also wrapped in Proxies and drafted, and it's safe to pull out a nested value into its own variable and then mutate it."),(0,i.kt)("p",null,"However, this still only applies to objects and arrays. If we pull out a primitive value into its own variable and try to update it, Immer has nothing to wrap and cannot track any updates:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const todosSlice = createSlice({\n  name: 'todos',\n  initialState: [],\n  reducers: {\n    brokenTodoToggled(state, action) {\n      const todo = state.find((todo) => todo.id === action.payload)\n      if (todo) {\n        // \u274c ERROR: Immer can't track updates to a primitive value!\n        let { completed } = todo\n        completed = !completed\n      }\n    },\n    fixedTodoToggled(state, action) {\n      const todo = state.find((todo) => todo.id === action.payload)\n      if (todo) {\n        // \u2705 CORRECT: This object is still wrapped in a Proxy, so we can \"mutate\" it\n        todo.completed = !todo.completed\n      }\n    },\n  },\n})\n")),(0,i.kt)("p",null,"There ",(0,i.kt)("em",{parentName:"p"},"is")," a gotcha here. ",(0,i.kt)("a",{parentName:"p",href:"https://immerjs.github.io/immer/pitfalls#data-not-originating-from-the-state-will-never-be-drafted"},"Immer will not wrap objects that are newly inserted into the state"),". Most of the time this shouldn't matter, but there may be occasions when you want to insert a value and then make further updates to it."),(0,i.kt)("p",null,"Related to this, RTK's ",(0,i.kt)("a",{parentName:"p",href:"/redux-toolkit/api/createEntityAdapter#crud-functions"},(0,i.kt)("inlineCode",{parentName:"a"},"createEntityAdapter")," update functions"),' can either be used as standalone reducers, or "mutating" update functions. These functions determine whether to "mutate" or return a new value by checking to see if the state they\'re given is wrapped in a draft or not. If you are calling these functions yourself inside of a case reducer, be sure you know whether you\'re passing them a draft value or a plain value.'),(0,i.kt)("p",null,"Finally, it's worth noting that ",(0,i.kt)("strong",{parentName:"p"},"Immer does not automatically create nested objects or arrays for you - you have to create them yourself"),". As an example, say we have a lookup table containing nested arrays, and we want to insert an item into one of those arrays. If we unconditionally try to insert without checking for the existence of that array, the logic will crash when the array doesn't exist. Instead, you'd need to ensure the array exists first:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const itemsSlice = createSlice({\n  name: 'items',\n  initialState: { a: [], b: [] },\n  reducers: {\n    brokenNestedItemAdded(state, action) {\n      const { id, item } = action.payload\n      // \u274c ERROR: will crash if no array exists for `id`!\n      state[id].push(item)\n    },\n    fixedNestedItemAdded(state, action) {\n      const { id, item } = action.payload\n      // \u2705 CORRECT: ensures the nested array always exists first\n      if (!state[id]) {\n        state[id] = []\n      }\n\n      state[id].push(item)\n    },\n  },\n})\n")),(0,i.kt)("h3",{id:"linting-state-mutations"},"Linting State Mutations"),(0,i.kt)("p",null,"Many ESLint configs include the ",(0,i.kt)("a",{parentName:"p",href:"https://eslint.org/docs/rules/no-param-reassign"},"https://eslint.org/docs/rules/no-param-reassign")," rule, which may also warn about mutations to nested fields. That can cause the rule to warn about mutations to ",(0,i.kt)("inlineCode",{parentName:"p"},"state")," in Immer-powered reducers, which is not helpful."),(0,i.kt)("p",null,"\uc774 \ubb38\uc81c\ub97c \ud574\uacb0\ud558\ub824\uba74 ESLint \uaddc\uce59\uc5d0 ",(0,i.kt)("inlineCode",{parentName:"p"},"state"),"\ub77c\ub294 \ub9e4\uac1c\ubcc0\uc218\uc5d0 \ub300\ud55c \ubcc0\ud615\uc744 \ubb34\uc2dc\ud558\ub3c4\ub85d \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"{\n  'no-param-reassign': ['error', { props: true, ignorePropertyModificationsFor: ['state'] }]\n}\n\n")),(0,i.kt)("h2",{id:"immer\uac00-\ub0b4\uc7a5\ub41c-\uc774\uc720"},"Immer\uac00 \ub0b4\uc7a5\ub41c \uc774\uc720"),(0,i.kt)("p",null,"We've received a number of requests over time to make Immer an optional part of RTK's ",(0,i.kt)("inlineCode",{parentName:"p"},"createSlice")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"createReducer")," APIs, rather than strictly required."),(0,i.kt)("p",null,"\uc6b0\ub9ac\uc758 \ub300\ub2f5\uc740 \ud56d\uc0c1 \ub3d9\uc77c\ud569\ub2c8\ub2e4: ",(0,i.kt)("strong",{parentName:"p"},"Immer\ub294 RTK\uc5d0\uc11c ",(0,i.kt)("em",{parentName:"strong"},"\ud544\uc218\uc801")," \uc774\uba70, \uadf8\uac83\uc740 \ubcc0\ud558\uc9c0 \uc54a\uc744 \uac83\uc785\ub2c8\ub2e4"),"."),(0,i.kt)("p",null,"It's worth going over the reasons why we consider Immer to be a critical part of RTK and why we will not make it optional."),(0,i.kt)("h3",{id:"immer\uc758-\uc774\uc810"},"Immer\uc758 \uc774\uc810"),(0,i.kt)("p",null,"Immer\uc5d0\ub294 \ub450 \uac00\uc9c0 \uc8fc\uc694 \uc774\uc810\uc774 \uc788\uc2b5\ub2c8\ub2e4. First, ",(0,i.kt)("strong",{parentName:"p"},"Immer drastically simplifies immutable update logic"),". ",(0,i.kt)("a",{parentName:"p",href:"https://redux.js.org/usage/structuring-reducers/immutable-update-patterns#updating-nested-objects"},"Proper immutable updates are extremely verbose"),". Those verbose operations are hard to read overall, and also obfuscate what the actual intent of the update statement is. Immer eliminates all the nested spreads and array slices. Not only is the code shorter and easier to read, it's much more clear what actual update is supposed to happen."),(0,i.kt)("p",null,"Second, ",(0,i.kt)("a",{parentName:"p",href:"https://redux.js.org/usage/structuring-reducers/immutable-update-patterns"},"writing immutable updates correctly is ",(0,i.kt)("em",{parentName:"a"},"hard")),", and it is really easy to make mistakes (like forgetting to copy a level of nesting in a set of object spreads, copying a top-level array and not the item to be updated inside the array, or forgetting that ",(0,i.kt)("inlineCode",{parentName:"p"},"array.sort()")," mutates the array). This is part of why ",(0,i.kt)("a",{parentName:"p",href:"https://redux.js.org/faq/react-redux#why-isnt-my-component-re-rendering-or-my-mapstatetoprops-running"},"accidental mutations has always been the most common cause of Redux bugs"),". ",(0,i.kt)("strong",{parentName:"p"},"Immer effectively ",(0,i.kt)("em",{parentName:"strong"},"eliminates")," accidental mutations"),". Not only are there no more spread operations that can be mis-written, but Immer freezes state automatically as well. This causes errors to be thrown if you do accidentally mutate, even outside of a reducer. ",(0,i.kt)("strong",{parentName:"p"},"Eliminating the #1 cause of Redux bugs is a ",(0,i.kt)("em",{parentName:"strong"},"huge")," improvement.")),(0,i.kt)("p",null,"Additionally, RTK Query uses Immer's patch capabilities to enable ",(0,i.kt)("a",{parentName:"p",href:"/redux-toolkit/rtk-query/usage/manual-cache-updates"},"optimistic updates and manual cache updates")," as well."),(0,i.kt)("h3",{id:"tradeoffs-and-concerns"},"Tradeoffs and Concerns"),(0,i.kt)("p",null,"\ub2e4\ub978 tool\ub4e4\uacfc \ub9c8\ucc2c\uac00\uc9c0\ub85c Immer\uc744 \uc0ac\uc6a9\ud558\ub294\ub370\uc5d0\ub294 \uc7a5\ub2e8\uc810\uc774 \uc788\uc73c\uba70, \uc774\uc5d0 \uc0ac\uc6a9\uc790\ub4e4\uc740 \uc0ac\uc6a9\uc5d0 \ub9ce\uc740 \uc6b0\ub824\ub97c \ud45c\uba85\ud588\uc2b5\ub2c8\ub2e4."),(0,i.kt)("p",null,"Immer does add to the overall app bundle size. It's about 8K min, 3.3K min+gz (ref: ",(0,i.kt)("a",{parentName:"p",href:"https://immerjs.github.io/immer/installation"},"Immer docs: Installation"),", ",(0,i.kt)("a",{parentName:"p",href:"https://bundle.js.org/?q=immer&treeshake=%5B%7Bdefault+as+produce+%7D%5D"},"Bundle.js.org analysis"),"). However, that library bundle size starts to pay for itself by shrinking the amount of reducer logic in your app. Additionally, the benefits of more readable code and eliminating mutation bugs are worth the size."),(0,i.kt)("p",null,"Immer also adds a bit of overhead in runtime performance. However, ",(0,i.kt)("a",{parentName:"p",href:"https://immerjs.github.io/immer/performance/"},'per the Immer "Performance" docs page, the overhead is not meaningful in practice'),". Additionally, ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/reduxjs/redux-toolkit/issues/242#issuecomment-583296008"},"reducers are almost never a perf bottleneck in a Redux app anyway"),". Instead, the cost of updating the UI is much more important."),(0,i.kt)("p",null,'So, while using Immer isn\'t "free", the bundle and perf costs are small enough to be worth it.'),(0,i.kt)("p",null,"The most realistic pain point with using Immer is that browser debuggers show Proxies in a confusing way, which makes it hard to inspect state variables while debugging. This is certainly an annoyance. However, this doesn't actually affect runtime behavior, and we've ",(0,i.kt)("a",{parentName:"p",href:"#debugging-and-inspecting-drafted-state"},"documented the use of ",(0,i.kt)("inlineCode",{parentName:"a"},"current")," to create a viewable plain JS version of the data")," above in this page. (Given the increasingly wide use of Proxies as part of libraries like Mobx and Vue 3, this is also not unique to Immer.)"),(0,i.kt)("p",null,'Another issue is education and understanding. Redux has always required immutability in reducers, and so seeing "mutating" code can be confusing. It\'s certainly possible that new Redux users might see those "mutations" in example code, assume that it\'s normal for Redux usage, and later try to do the same thing outside of ',(0,i.kt)("inlineCode",{parentName:"p"},"createSlice"),". This would indeed cause real mutations and bugs, because it's outside of Immer's ability to wrap the updates."),(0,i.kt)("p",null,"We've addressed this by ",(0,i.kt)("a",{parentName:"p",href:"https://redux.js.org/tutorials/essentials/part-1-overview-concepts#immutability"},"repeatedly emphasizing the important of immutability throughout our docs"),", including multiple highlighted sections emphasizing that ",(0,i.kt)("a",{parentName:"p",href:"https://redux.js.org/tutorials/essentials/part-2-app-structure#reducers-and-immutable-updates"},'the "mutations" only work right thanks to Immer\'s "magic" inside')," and adding this specific docs page you're reading now."),(0,i.kt)("h3",{id:"architecture-and-intent"},"Architecture and Intent"),(0,i.kt)("p",null,"Immer\uac00 \uc120\ud0dd \uc0ac\ud56d\uc774 \uc544\ub2cc \ub450 \uac00\uc9c0 \uc774\uc720\uac00 \ub354 \uc788\uc2b5\ub2c8\ub2e4."),(0,i.kt)("p",null,"\ud558\ub098\ub294 RTK\uc758 \uc544\ud0a4\ud14d\ucc98\uc785\ub2c8\ub2e4. ",(0,i.kt)("inlineCode",{parentName:"p"},"createSlice")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"createReducer")," are implemented by directly importing Immer. There's no easy way to create a version of either of them that would have a hypothetical ",(0,i.kt)("inlineCode",{parentName:"p"},"immer: false")," option. You can't do optional imports, and we need Immer available immediately and synchronously during the initial load of the app."),(0,i.kt)("p",null,"Additionally, RTK currently calls ",(0,i.kt)("a",{parentName:"p",href:"https://immerjs.github.io/immer/installation#pick-your-immer-version"},"Immer's ",(0,i.kt)("inlineCode",{parentName:"a"},"enableES5")," plugin")," immediately on import, in order to ensure that Immer works correctly in environments without ES6 Proxy support (such as IE11 and older React Native versions). This is necessary because Immer split out the ES5 behavior into a plugin around version 6.0, but dropping the ES5 support would have been a major breaking change for RTK and broken our users. Because RTK itself calls ",(0,i.kt)("inlineCode",{parentName:"p"},"enableES5")," from the entry point, Immer is ",(0,i.kt)("em",{parentName:"p"},"always")," pulled in."),(0,i.kt)("p",null,"And finally: ",(0,i.kt)("strong",{parentName:"p"},"Immer is built into RTK by default because we believe it is the best choice for our users!")," We ",(0,i.kt)("em",{parentName:"p"},"want")," our users to be using Immer, and consider it to be a critical non-negotiable component of RTK. The great benefits like simpler reducer code and preventing accidental mutations far outweigh the relatively small concerns."),(0,i.kt)("h2",{id:"further-information"},"Further Information"),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"https://immerjs.github.io/immer/"},"the Immer documentation")," for more details on Immer's APIs, edge cases, and behavior."),(0,i.kt)("p",null,"For historical discussion on why Immer is required, see these issues:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/reduxjs/redux-toolkit/issues/5"},"RTK #5: Why Immer inside a starter kit?")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/reduxjs/redux-toolkit/issues/183"},"RTK #183: Consider adding an option to remove Immer")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/reduxjs/redux-toolkit/issues/242"},"RTK #242: make ",(0,i.kt)("inlineCode",{parentName:"a"},"immer")," optional for ",(0,i.kt)("inlineCode",{parentName:"a"},"createReducer")))))}u.isMDXComponent=!0},7586:function(e,t){t.Z="data:image/png;base64,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"},1157:function(e,t){t.Z="data:image/png;base64,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"}}]);